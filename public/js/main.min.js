var global=function(a){function s(a,s,t){var i;return function(){var e=this,r=arguments,p=function(){i=null,t||a.apply(e,r)},n=t&&!i;clearTimeout(i),i=setTimeout(p,s),n&&a.apply(e,r)}}return{debounce:s}}(jQuery),example=function(a){return{}}(jQuery),mCard=function(a){function s(s){var t=a(s.target),i=t.closest(".wpgr-m_card"),p=i.data("wish-id"),n=i.closest(".wpgr-wishlist").data("id"),o=parseInt(i.data("parts")),_=parseInt(i.data("parts-given")),l=parseFloat(i.data("price-per-part")),d=i.data("parts-string"),c=i.data("part-string"),u=i.data("currency"),g=i.data("currency-placement");if(e.data("wish-id",p),e.data("wishlist-id",n),e.data("has-parts",o>1),e.data("parts",o),e.data("parts-given",_),e.addClass("is-active"),r.addClass("no-scroll"),i.hasClass("wpgr-m_card--single")||i.hasClass("wpgr-m_card--parts")){var v=e.find("#wpgr_popup_name");if(v.addClass("is-active"),o>1){e.find(".wpgr-o_popup__parts").show(),$r=a(".wpgr-o_popup__rangeslider");var f=a(".wpgr-o_popup__rangeslider-result"),h=a(".wpgr-o_popup__rangeslider-val"),m=a(".wpgr-o_popup__rangeslider-total"),w=a(".wpgr-o_popup__rangeslider-parts"),C={min:_,max:o,step:1,value:_+1};$r.attr(C),w.data("parts",d),w.data("part",c),$r.rangeslider({polyfill:!1,onInit:function(){var s=this.$range;if(""!=l){var t=s.find(".rangeslider__handle"),i=(this.value-_)*l;i=i%1===0?i:parseFloat(i).toFixed(2);var r='<div class="rangeslider__handle__value">'+("before"===g?u+i:i+u)+"</div>";t.append(r)}else e.find(".wpgr-o_popup__rangeslider-wrapper").addClass("no-price");h.html(this.max);var p=f.css("width");if(f.css("flex-basis",p),h.html(this.value),m.html(o),this.min>0){var n=this.min/this.max*100;a('<div class="rangeslider__min" />').insertBefore(this.$range).width(n+"%")}w.html("<span>"+parseInt(this.max-this.min)+"</span> "+w.data("parts"));var d=w.css("width");w.css("flex-basis",d),this.value-this.min>1||this.value-this.min==0?w.html("<span>"+parseInt(this.value-this.min)+"</span> "+w.data("parts")):w.html("<span>"+parseInt(this.value-this.min)+"</span> "+w.data("part")),this.rangeDimension=this.$range.width(),this.maxHandlePos=this.$range.width()-this.handleDimension},onSlide:function(a,s){var t=this.$range.find(".rangeslider__handle__value"),i=(this.value-_)*l;i=i%1===0?i:parseFloat(i).toFixed(2),t.text("before"===g?u+i:i+u),h.html(s),this.value-this.min>1||this.value-this.min==0?w.html("<span>"+parseInt(this.value-this.min)+"</span> "+w.data("parts")):w.html("<span>"+parseInt(this.value-this.min)+"</span> "+w.data("part"))}}).on("input",function(){h[0].textContent=this.value}),$r.change()}}else{var v=e.find("#wpgr_popup_parts");e.find("#wpgr_popup_buyer");v.addClass("is-active")}}var t=(a(".wpgr-m_card"),a(".wpgr-m_card--content")),i=(a(".wpgr-m_card__toggle"),a(".wpgr-m_btn__open")),e=a(".wpgr-o_popup"),r=(a(".wpgr-m_card__desc"),a("body"));i.on("click",function(a){a.stopPropagation(),s(a)}),t.on("click",function(s){function t(){r.slideToggle("fast"),e.toggleClass("is-open"),r.toggleClass("is-active"),p.toggleClass("is-active")}var i=a(s.target),e=i.closest(".wpgr-m_card"),r=i.closest(".wpgr-m_card").find(".wpgr-m_card__content"),p=i.closest(".wpgr-m_card").find(".wpgr-m_card__toggle");if(!i.hasClass("wpgr-m_card__figure"))if(r.hasClass("is-active")){if(!(r.hasClass("is-active")&&i.hasClass("wpgr-m_card__toggle-icon")||i.hasClass("wpgr-m_card__toggle")))return;t()}else t()})}(jQuery),mPopup=function(a){function s(){b.hasClass("is-active")||b.addClass("is-active")}function t(){b.hasClass("is-active")&&b.removeClass("is-active")}function i(){var s=a(this);s.prev().removeClass("is-done"),s.prev().addClass("is-active")}function e(){var s=a(this);s.val().length&&s.prev().addClass("is-done"),s.prev().removeClass("is-active")}function r(){$this=a(this);var s=$this.closest(".wpgr-o_popup__step");s.removeClass("is-active"),a("#wpgr_popup_parts").addClass("is-active")}function p(){$this=a(this);var s=$this.closest(".wpgr-o_popup__step");s.removeClass("is-active"),a("#wpgr_popup_buyer").addClass("is-active")}function n(s){var t=a(s.target),i=t.closest(".wpgr-o_popup__step");i.removeClass("is-active"),i.next("#wpgr_popup_buyer").addClass("is-active")}function o(s){var t=a(s.target);t.hasClass("wpgr-m_btn__open")||d.hasClass("is-active")&&(!t.closest(".wpgr-o_popup__step").length||t.hasClass("wpgr-o_popup__btn-close")&&t.hasClass("wpgr-o_popup__btn-save"))&&_()}function _(){c.removeClass("is-active"),d.removeClass("is-active"),x.removeClass("no-scroll"),d.find("#your_name2").val(""),d.find("#your_email").val(""),d.find("#your_message").val(""),d.find(".wpgr-o_popup__parts").hide(),d.find(".wpgr-o_popup__rangeslider").val(""),d.find(".wpgr-o_popup__rangeslider").rangeslider("destroy"),d.find(".rangeslider").remove(),d.find(".rangeslider__min").remove(),d.find(".wpgr-o_popup__rangeslider-parts").empty(),d.find(".wpgr-o_popup__rangeslider-wrapper").removeClass("no-price"),d.removeAttr("data-wish-id"),d.removeAttr("data-wishlist-id")}function l(s){var t=a(s.target).closest(".wpgr-o_popup"),i=t.data("wish-id"),e=t.data("wishlist-id"),r=t.data("has-parts"),p=t.find("#no_of_parts").val(),n=r?p-t.data("parts-given"):1,o=t.data("parts"),l=t.find("#your_name2").val(),d=t.find("#your_email").val(),c=t.find("#your_message").val();a.ajax({url:variables.ajaxurl,type:"POST",dataType:"json",data:{action:"update_gift_availability",nonce:variables.update_gift_availabilty_nonce,version:"new",wishlist_id:e,gift_id:i,gift_availability:"false",gift_has_parts:r,gift_parts_reserved:n,gift_reserver:l,gift_reserver_email:d,gift_reserver_message:c}}).done(function(s){r&&(a('.wpgr-m_card[data-wish-id="'+i+'"]').find(".wpgr-m_card__progress span").width(p/o*100+"%"),a('.wpgr-m_card[data-wish-id="'+i+'"]').find(".wpgr-m_card__progress-wrapper > span").text(p),a('.wpgr-m_card[data-wish-id="'+i+'"]').data("parts-given",p)),p!=o&&r||a('.wpgr-m_card[data-wish-id="'+i+'"]').addClass("wpgr-m_card--bought")}).fail(function(){}),_()}var d=a(".wpgr-o_popup"),c=a(".wpgr-o_popup__step"),u=c.find(".wpgr-o_popup__btn-prev"),g=c.find(".wpgr-o_popup__btn-next"),v=(c.find(".wpgr-o_popup__btn-save"),c.find(".wpgr-o_popup__btn-close")),f=c.find(".wpgr-o_popup__list-item-01"),h=c.find(".wpgr-o_popup__list-item-02"),m=a(".wpgr-o_popup__input-wrapper input"),w=a(".wpgr-o_popup__input-textarea"),C=(a(".wpgr-o_popup__input-label"),a("#buyer_yes")),y=a("#buyer_no"),b=a(".wpgr-m_btn__buyer-content"),x=a("body");x.on("mousedown",function(a){o(a)}),x.on("keyup",function(a){27==a.which&&_()}),g.on("click",function(a){a.preventDefault(),n(a)}),f.on("click",r),h.on("click",p),d.on("submit",function(a){a.preventDefault(),l(a)}),d.find("#your_name2").on("keypress",function(a){13==a.which&&(a.preventDefault(),d.submit())}),v.on("click",function(a){a.preventDefault(),_()}),u.on("click",function(a){a.preventDefault(),_()}),m.on("focusin",i),w.on("focusin",i),m.on("focusout",e),w.on("focusout",e),C.on("click",s),y.on("click",t)}(jQuery);