var global=function(a){function s(a,s,i){var e;return function(){var t=this,r=arguments,p=function(){e=null,i||a.apply(t,r)},n=i&&!e;clearTimeout(e),e=setTimeout(p,s),n&&a.apply(t,r)}}return{debounce:s}}(jQuery),example=function(a){return{}}(jQuery),mCard=function(a){function s(s){var i=a(s.target),e=i.closest(".wpgr-m_card"),p=e.data("wish-id"),n=e.closest(".wpgr-wishlist").data("id"),o=e.data("parts"),_=e.data("parts-given"),l=e.data("price-per-part"),d=e.data("currency"),u=e.data("currency-placement");if(t.data("wish-id",p),t.data("wishlist-id",n),t.data("has-parts",o>1),t.data("parts",o),t.data("parts-given",_),t.addClass("is-active"),r.addClass("no-scroll"),e.hasClass("wpgr-m_card--single")){var c=t.find("#wpgr_popup_name");if(c.addClass("is-active"),o>1){t.find(".wpgr-o_popup__parts").show(),$r=a(".wpgr-o_popup__rangeslider");var g=a(".wpgr-o_popup__rangeslider-result"),v=a(".wpgr-o_popup__rangeslider-val"),f=a(".wpgr-o_popup__rangeslider-parts"),h={min:_,max:o,step:1,value:_+1};$r.attr(h),$r.rangeslider({polyfill:!1,onInit:function(){var s=this.$range;if(""!=l){var i=s.find(".rangeslider__handle"),e=(this.value-_)*l;e=e%1===0?e:parseFloat(e).toFixed(2);var r='<div class="rangeslider__handle__value">'+("before"===u?d+e:e+d)+"</div>";i.append(r)}else t.find(".wpgr-o_popup__rangeslider-wrapper").addClass("no-price");v.html(this.max);var p=g.css("width");if(g.css("flex-basis",p),v.html(this.value),this.min>0){var n=this.min/this.max*100;a('<div class="rangeslider__min" />').insertBefore(this.$range).width(n+"%")}f.html("<span>"+parseInt(this.max-this.min)+"</span> "+f.data("parts"));var o=f.css("width");f.css("flex-basis",o),this.value-this.min>1||this.value-this.min==0?f.html("<span>"+parseInt(this.value-this.min)+"</span> "+f.data("parts")):f.html("<span>"+parseInt(this.value-this.min)+"</span> "+f.data("part")),this.rangeDimension=this.$range.width(),this.maxHandlePos=this.$range.width()-this.handleDimension},onSlide:function(a,s){var i=this.$range.find(".rangeslider__handle__value"),e=(this.value-_)*l;e=e%1===0?e:parseFloat(e).toFixed(2),i.text("before"===u?d+e:e+d),v.html(s),this.value-this.min>1||this.value-this.min==0?f.html("<span>"+parseInt(this.value-this.min)+"</span> "+f.data("parts")):f.html("<span>"+parseInt(this.value-this.min)+"</span> "+f.data("part"))}}).on("input",function(){v[0].textContent=this.value}),$r.change()}}else{var c=t.find("#wpgr_popup_parts");t.find("#wpgr_popup_buyer");c.addClass("is-active")}}var i=(a(".wpgr-m_card"),a(".wpgr-m_card--content")),e=(a(".wpgr-m_card__toggle"),a(".wpgr-m_btn__open")),t=a(".wpgr-o_popup"),r=(a(".wpgr-m_card__desc"),a("body"));e.on("click",function(a){a.stopPropagation(),s(a)}),i.on("click",function(s){function i(){r.slideToggle("fast"),t.toggleClass("is-open"),r.toggleClass("is-active"),p.toggleClass("is-active")}var e=a(s.target),t=e.closest(".wpgr-m_card"),r=e.closest(".wpgr-m_card").find(".wpgr-m_card__content"),p=e.closest(".wpgr-m_card").find(".wpgr-m_card__toggle");if(!e.hasClass("wpgr-m_card__figure"))if(r.hasClass("is-active")){if(!(r.hasClass("is-active")&&e.hasClass("wpgr-m_card__toggle-icon")||e.hasClass("wpgr-m_card__toggle")))return;i()}else i()})}(jQuery),mPopup=function(a){function s(){b.hasClass("is-active")||b.addClass("is-active")}function i(){b.hasClass("is-active")&&b.removeClass("is-active")}function e(){var s=a(this);s.prev().removeClass("is-done"),s.prev().addClass("is-active")}function t(){var s=a(this);s.val().length&&s.prev().addClass("is-done"),s.prev().removeClass("is-active")}function r(){$this=a(this);var s=$this.closest(".wpgr-o_popup__step");s.removeClass("is-active"),a("#wpgr_popup_parts").addClass("is-active")}function p(){$this=a(this);var s=$this.closest(".wpgr-o_popup__step");s.removeClass("is-active"),a("#wpgr_popup_buyer").addClass("is-active")}function n(s){var i=a(s.target),e=i.closest(".wpgr-o_popup__step");e.removeClass("is-active"),e.next("#wpgr_popup_buyer").addClass("is-active")}function o(s){var i=a(s.target);i.hasClass("wpgr-m_btn__open")||d.hasClass("is-active")&&(!i.closest(".wpgr-o_popup__step").length||i.hasClass("wpgr-o_popup__btn-close")&&i.hasClass("wpgr-o_popup__btn-save"))&&_()}function _(){u.removeClass("is-active"),d.removeClass("is-active"),x.removeClass("no-scroll"),d.find("#your_name2").val(""),d.find("#your_email").val(""),d.find("#your_message").val(""),d.find(".wpgr-o_popup__parts").hide(),d.find(".wpgr-o_popup__rangeslider").val(""),d.find(".wpgr-o_popup__rangeslider").rangeslider("destroy"),d.find(".rangeslider").remove(),d.find(".rangeslider__min").remove(),d.find(".wpgr-o_popup__rangeslider-parts").empty(),d.find(".wpgr-o_popup__rangeslider-wrapper").removeClass("no-price"),d.removeAttr("data-wish-id"),d.removeAttr("data-wishlist-id")}function l(s){var i=a(s.target).closest(".wpgr-o_popup"),e=i.data("wish-id"),t=i.data("wishlist-id"),r=i.data("has-parts"),p=i.find("#no_of_parts").val(),n=p-i.data("parts-given"),o=i.data("parts"),l=i.find("#your_name2").val(),d=i.find("#your_email").val(),u=i.find("#your_message").val();a.ajax({url:variables.ajaxurl,type:"POST",dataType:"json",data:{action:"update_gift_availability",nonce:variables.update_gift_availabilty_nonce,version:"new",wishlist_id:t,gift_id:e,gift_availability:"false",gift_has_parts:r,gift_parts_reserved:n,gift_reserver:l,gift_reserver_email:d,gift_reserver_message:u}}).done(function(s){r&&(a('.wpgr-m_card[data-wish-id="'+e+'"]').find(".wpgr-m_card__progress span").width(p/o*100+"%"),a('.wpgr-m_card[data-wish-id="'+e+'"]').find(".wpgr-m_card__progress-wrapper > span").text(p)),p!=o&&r||a('.wpgr-m_card[data-wish-id="'+e+'"]').addClass("wpgr-m_card--bought")}).fail(function(){}),_()}var d=a(".wpgr-o_popup"),u=a(".wpgr-o_popup__step"),c=u.find(".wpgr-o_popup__btn-prev"),g=u.find(".wpgr-o_popup__btn-next"),v=(u.find(".wpgr-o_popup__btn-save"),u.find(".wpgr-o_popup__btn-close")),f=u.find(".wpgr-o_popup__list-item-01"),h=u.find(".wpgr-o_popup__list-item-02"),m=a(".wpgr-o_popup__input-wrapper input"),w=a(".wpgr-o_popup__input-textarea"),C=(a(".wpgr-o_popup__input-label"),a("#buyer_yes")),y=a("#buyer_no"),b=a(".wpgr-m_btn__buyer-content"),x=a("body");x.on("mousedown",function(a){o(a)}),x.on("keyup",function(a){27==a.which&&_()}),g.on("click",function(a){a.preventDefault(),n(a)}),f.on("click",r),h.on("click",p),d.on("submit",function(a){a.preventDefault(),l(a)}),d.find("#your_name2").on("keypress",function(a){13==a.which&&(a.preventDefault(),d.submit())}),v.on("click",function(a){a.preventDefault(),_()}),c.on("click",function(a){a.preventDefault(),_()}),m.on("focusin",e),w.on("focusin",e),m.on("focusout",t),w.on("focusout",t),C.on("click",s),y.on("click",i)}(jQuery);